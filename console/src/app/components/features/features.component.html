<div class="feature-settings-wrapper">
  <div class="feature-title-row">
    <h2>{{ 'DESCRIPTIONS.SETTINGS.FEATURES.TITLE' | translate }}</h2>
    <a
      mat-icon-button
      href="https://zitadel.com/docs/apis/resources/feature_service_v2/feature-service"
      rel="noreferrer"
      target="_blank"
    >
      <mat-icon class="icon">info_outline</mat-icon>
    </a>
  </div>
  <p class="events-desc cnsl-secondary-text">{{ 'DESCRIPTIONS.SETTINGS.FEATURES.DESCRIPTION' | translate }}</p>

  <cnsl-card *ngIf="featureData">
    <div class="features">
      <div class="feature-row" *ngIf="featureData.loginDefaultOrg">
        <mat-checkbox
          class="slide-toggle"
          color="primary"
          name="hasNumber"
          ngDefaultControl
          [(ngModel)]="featureData.loginDefaultOrg.enabled"
          [disabled]="(['policy.write'] | hasRole | async) === false"
        >
          <div class="slide-toggle-row">
            <span class="left-desc">{{ 'SETTING.FEATURES.LOGINDEFAULTORG' | translate }}</span>
          </div>
        </mat-checkbox>
        <cnsl-info-section class="feature-info">{{
          'SETTING.FEATURES.LOGINDEFAULTORG_DESCRIPTION' | translate
        }}</cnsl-info-section>
      </div>
      <div class="feature-row" *ngIf="featureData.oidcLegacyIntrospection">
        <mat-checkbox
          class="slide-toggle"
          color="primary"
          name="hasNumber"
          ngDefaultControl
          [(ngModel)]="featureData.oidcLegacyIntrospection.enabled"
          [disabled]="(['policy.write'] | hasRole | async) === false"
        >
          <div class="slide-toggle-row">
            <span class="left-desc">{{ 'SETTING.FEATURES.OIDCLEGACYINTROSPECTION' | translate }}</span>
          </div>
        </mat-checkbox>
        <cnsl-info-section class="feature-info">{{
          'SETTING.FEATURES.OIDCLEGACYINTROSPECTION_DESCRIPTION' | translate
        }}</cnsl-info-section>
      </div>
      <div class="feature-row" *ngIf="featureData.oidcTokenExchange">
        <mat-checkbox
          class="slide-toggle"
          color="primary"
          name="hasNumber"
          ngDefaultControl
          [(ngModel)]="featureData.oidcTokenExchange.enabled"
          [disabled]="(['policy.write'] | hasRole | async) === false"
        >
          <div class="slide-toggle-row">
            <span class="left-desc">{{ 'SETTING.FEATURES.OIDCTOKENEXCHANGE' | translate }}</span>
          </div>
        </mat-checkbox>
        <cnsl-info-section class="feature-info">{{
          'SETTING.FEATURES.OIDCTOKENEXCHANGE_DESCRIPTION' | translate
        }}</cnsl-info-section>
      </div>
      <div class="feature-row" *ngIf="featureData.oidcTriggerIntrospectionProjections">
        <mat-checkbox
          class="slide-toggle"
          color="primary"
          name="hasNumber"
          ngDefaultControl
          [(ngModel)]="featureData.oidcTriggerIntrospectionProjections.enabled"
          [disabled]="(['policy.write'] | hasRole | async) === false"
        >
          <div class="slide-toggle-row">
            <span class="left-desc">{{ 'SETTING.FEATURES.OIDCTRIGGERINTROSPECTIONPROJECTIONS' | translate }}</span>
          </div>
        </mat-checkbox>
        <cnsl-info-section class="feature-info">{{
          'SETTING.FEATURES.OIDCTRIGGERINTROSPECTIONPROJECTIONS_DESCRIPTION' | translate
        }}</cnsl-info-section>
      </div>
      <div class="feature-row" *ngIf="featureData.userSchema">
        <mat-checkbox
          class="slide-toggle"
          color="primary"
          name="hasNumber"
          ngDefaultControl
          [(ngModel)]="featureData.userSchema.enabled"
          [disabled]="(['policy.write'] | hasRole | async) === false"
        >
          <div class="slide-toggle-row">
            <span class="left-desc">{{ 'SETTING.FEATURES.USERSCHEMA' | translate }}</span>
          </div>
        </mat-checkbox>
        <cnsl-info-section class="feature-info">{{
          'SETTING.FEATURES.USERSCHEMA_DESCRIPTION' | translate
        }}</cnsl-info-section>
      </div>
    </div>
  </cnsl-card>
  <div class="btn-container">
    <button
      (click)="saveFeatures()"
      [disabled]="(['policy.write'] | hasRole | async) === false"
      color="primary"
      type="submit"
      mat-raised-button
    >
      {{ 'ACTIONS.SAVE' | translate }}
    </button>
  </div>
</div>
